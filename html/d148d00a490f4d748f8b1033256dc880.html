<p>Now let setup an application and see how we can get istio benefits out of it. I will use the demo application provided by istio. This application is a micro-service based application written with different languages.</p>
<p style="text-align: center;"><img height="564" width="824" src="/static/noistio.svg" alt="noistio" /></p>
<p style="text-rendering: optimizelegibility; margin-top: 0px; margin-right: 0px; margin-left: 0px; padding: 0px; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; font-size: 16px; font-family: &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; vertical-align: baseline; color: rgb(49, 49, 49);">Let's deploy this application and see how istio will inject its sidecars. In the istio folder run the following and wait until all pods are running.</p>
<pre class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 16px; margin-top: 0px; margin-bottom: 1.5em; padding: 0.5rem; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; color: rgb(61, 60, 60); box-sizing: border-box; background: rgb(239, 238, 238); overflow-x: auto;"><code class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 1em; margin: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; border-radius: 0px; background-image: initial; color: rgb(49, 49, 49); box-sizing: border-box;"><span color="#313131" face="Iosevka, monospace" style="text-rendering: optimizelegibility; margin: 0px; padding: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.4em; font-family: inherit; vertical-align: baseline;">$</span></code><span color="#313131" face="Iosevka, monospace" style="text-rendering: optimizelegibility; margin: 0px; padding: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.4em; vertical-align: baseline; color: rgb(49, 49, 49);">kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml</span><span style="text-rendering: optimizelegibility; margin: 0px; padding: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline;">
</span></pre>
<p style="text-align: justify;"></p>
<p style="text-rendering: optimizelegibility; margin-top: 0px; margin-right: 0px; margin-left: 0px; padding: 0px; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; font-size: 16px; font-family: &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; vertical-align: baseline; color: rgb(49, 49, 49);">Now&nbsp;we need to enable the access to our application from outside the cluster. Luckily istio allows to do that using an istio gateway. Let's create one:</p>
<pre class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 16px; margin-top: 0px; margin-bottom: 1.5em; padding: 0.5rem; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; color: rgb(61, 60, 60); box-sizing: border-box; background: rgb(239, 238, 238); overflow-x: auto;"><code class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 1em; margin: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; border-radius: 0px; background-image: initial; color: rgb(49, 49, 49); box-sizing: border-box;"><span color="#313131" face="Iosevka, monospace" style="text-rendering: optimizelegibility; margin: 0px; padding: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.4em; font-family: inherit; vertical-align: baseline;">$</span></code><span color="#313131" face="Iosevka, monospace" style="color: #313131; font-family: Iosevka, monospace;">kubectl apply -f samples/bookinfo/networking/bookinfo-gateway.yaml</span></pre>
<p style="text-align: justify;"></p>
<p style="text-rendering: optimizelegibility; margin-top: 0px; margin-right: 0px; margin-left: 0px; padding: 0px; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; font-size: 16px; font-family: &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; vertical-align: baseline; color: rgb(49, 49, 49);">And do not forget to enable ingress addon if you are using minikube</p>
<p style="text-rendering: optimizelegibility; margin-top: 0px; margin-right: 0px; margin-left: 0px; padding: 0px; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; font-size: 16px; font-family: &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; vertical-align: baseline; color: rgb(49, 49, 49);"></p>
<p style="text-align: justify;"></p>
<p></p>
<pre class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 16px; margin-top: 0px; margin-bottom: 1.5em; padding: 0.5rem; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; color: rgb(61, 60, 60); box-sizing: border-box; background: rgb(239, 238, 238); overflow-x: auto;"><code class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 1em; margin: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; border-radius: 0px; background-image: initial; color: rgb(49, 49, 49); box-sizing: border-box;"><span color="#313131" face="Iosevka, monospace" style="text-rendering: optimizelegibility; margin: 0px; padding: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.4em; font-family: inherit; vertical-align: baseline;">$minikube addons enable ingress</span></code></pre>
<p style="text-rendering: optimizelegibility; margin-top: 0px; margin-right: 0px; margin-left: 0px; padding: 0px; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; font-size: 16px; font-family: &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; vertical-align: baseline; color: rgb(49, 49, 49);">Now our application is accessible using the ip returned by minikube ip and the port the you can identify for the istio ingress that is bound to http 80 port:</p>
<pre class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 16px; margin-top: 0px; margin-bottom: 1.5em; padding: 0.5rem; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; color: rgb(61, 60, 60); box-sizing: border-box; background: rgb(239, 238, 238); overflow-x: auto;"><code class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 1em; margin: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; border-radius: 0px; background-image: initial; color: rgb(49, 49, 49); box-sizing: border-box;"><span color="#313131" face="Iosevka, monospace" style="text-rendering: optimizelegibility; margin: 0px; padding: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: 1.4em; font-family: inherit; vertical-align: baseline;">$kubectl get service -n istio-system
NAME                        TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)                                                                      AGE
grafana                     ClusterIP      10.101.238.151   &lt;none&gt;        3000/TCP                                                              54m
istio-egressgateway         ClusterIP      10.103.238.221   &lt;none&gt;        80/TCP,443/TCP,15443/TCP                                                     
istio-ingressgateway        LoadBalancer   10.106.235.164   &lt;pending&gt;     15020:32763/TCP,<span style="color: rgb(0, 128, 0);">80:31857/TCP</span>,443:31413/TCP,31400:31233/TCP,15443:31794/TCP
istiod                      ClusterIP      10.103.107.126   &lt;none&gt;        15010/TCP,15012/TCP,443/TCP,15014/TCP,53/UDP,853/TCP                         
jaeger-agent                ClusterIP      None             &lt;none&gt;        5775/UDP,6831/UDP,6832/UDP                                                   
jaeger-collector            ClusterIP      10.108.196.85    &lt;none&gt;        14267/TCP,14268/TCP,14250/TCP                                                
jaeger-collector-headless   ClusterIP      None             &lt;none&gt;        14250/TCP                                                                    
jaeger-query                ClusterIP      10.106.216.104   &lt;none&gt;        16686/TCP                                                                    
kiali                       ClusterIP      10.103.120.52    &lt;none&gt;        20001/TCP                                                                    
prometheus                  ClusterIP      10.107.217.252   &lt;none&gt;        9090/TCP                                                                     
tracing                     ClusterIP      10.98.136.144    &lt;none&gt;        80/TCP                                                                       
zipkin                      ClusterIP      10.97.105.163    &lt;none&gt;        9411/TCP</span></code></pre>
<p style="text-rendering: optimizelegibility; margin-top: 0px; margin-right: 0px; margin-left: 0px; padding: 0px; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; font-size: 16px; font-family: &quot;Open Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; vertical-align: baseline; color: rgb(49, 49, 49);">In my case the port will be&nbsp;<span style="color: #008000; font-family: inherit; font-size: inherit; font-style: inherit; font-variant-ligatures: inherit; font-variant-caps: inherit; font-weight: inherit; background-color: initial; white-space: pre-wrap;">31857. </span>So if I visit this address&nbsp;<a href="http://192.168.64.19:31857/productpage" style="font-family: 'Open Sans', Verdana, Arial, Helvetica, sans-serif;">http://192.168.64.19:31857/productpage</a>&nbsp;my application should be visible. A couple of refresh of the browser should show that the reviews are changing since we are load balancing between different versions. Now let's move on to the next section.</p>