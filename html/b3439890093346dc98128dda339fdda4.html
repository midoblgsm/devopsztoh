<p>In order to setup istio, we need to have a running kubernetes cluster. In this course I will be using minikube to illustrate the usage of istion.</p>
<p>To start a minikube instance you can run the following:</p>
<pre class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 16px; margin-top: 0px; margin-bottom: 1.5em; padding: 0.5rem; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; color: #3d3c3c; box-sizing: border-box; background: #efeeee; overflow-x: auto;"><code class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 1em; margin: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; border-radius: 0px; background-image: initial; color: #313131; box-sizing: border-box;">$minikube start --memory 7020  --cpus 4<br /></code></pre>
<p style="text-rendering: optimizelegibility; margin-top: 0px; margin-right: 0px; margin-left: 0px; padding: 0px; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; font-size: 16px; font-family: 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif; vertical-align: baseline; color: #313131;"><code class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 1em; margin: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; border-radius: 0px; background-image: initial; color: #313131; box-sizing: border-box;">The minimum required memory is 4048, otherwise the system will be crashing and require a lot more tuning to get the demo running. Once your minikube is ready, you need to download and install istioclt which serves as a command line to install and interact with istio.</code></p>
<pre class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 16px; margin-top: 0px; margin-bottom: 1.5em; padding: 0.5rem; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; color: #3d3c3c; box-sizing: border-box; background: #efeeee; overflow-x: auto;"><code class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 1em; margin: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; border-radius: 0px; background-image: initial; color: #313131; box-sizing: border-box;">$ curl -L https://istio.io/downloadIstio | sh -<br />$ cd istio-1.6.1<br />$ export PATH=$PWD/bin:$PATH<br /></code></pre>
<p><code class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 1em; margin: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; border-radius: 0px; background-image: initial; color: #313131; box-sizing: border-box;">The previous command will install the latest version of istio. The one that I am seeing at the time of preparing the course is 1.6.1. You can add the binary to your path in your bashrc file or use the export command.</code></p>
<p><span color="#313131" face="Iosevka, monospace" style="color: #313131; font-family: Iosevka, monospace;">Istio had some predefined profiles to run. We will use the demo profile during this course. To install that profile we can use the following command:</span></p>
<pre class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 16px; margin-top: 0px; margin-bottom: 1.5em; padding: 0.5rem; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; color: #3d3c3c; box-sizing: border-box; background: #efeeee; overflow-x: auto;"><code class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 1em; margin: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; border-radius: 0px; background-image: initial; color: #313131; box-sizing: border-box;"><span color="#313131" face="Iosevka, monospace" style="color: #313131; font-family: Iosevka, monospace;"><span style="font-size: 1em; font-style: inherit; font-variant-ligatures: inherit; font-variant-caps: inherit; font-weight: inherit;">$</span>istioctl manifest apply --set profile=demo<span style="font-size: 1em; font-style: inherit; font-variant-ligatures: inherit; font-variant-caps: inherit; font-weight: inherit;"><br /></span></span></code></pre>
<p>In order to instruct istio to auto inject proxies to our deployments we can label the namespace with the following:&nbsp;</p>
<pre class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 16px; margin-top: 0px; margin-bottom: 1.5em; padding: 0.5rem; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; color: #3d3c3c; box-sizing: border-box; background: #efeeee; overflow-x: auto;"><code class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 1em; margin: 0px; border: 0px; outline: 0px; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; border-radius: 0px; background-image: initial; color: #313131; box-sizing: border-box;"><span color="#313131" face="Iosevka, monospace"><span style="font-size: 1em; font-style: inherit; font-variant-ligatures: inherit; font-variant-caps: inherit; font-weight: inherit;">$</span></span></code><span color="#313131" face="Iosevka, monospace" style="color: #313131; font-family: Iosevka, monospace;">kubectl label namespace default istio-injection=enabled</span><span style="color: #3d3c3c; font-family: Iosevka, monospace; font-size: 16px;">
</span></pre>
<p>Now any pod that will be created in the default namespace will get a proxy sidecar that will allow to add istio features. To validate your installation make sure that all the pods in istio-system namespace are up and running.</p>
<pre class=" language-bash" style="text-rendering: optimizelegibility; font-family: Iosevka, monospace; font-size: 16px; margin-top: 0px; margin-bottom: 1.5em; padding: 0.5rem; border: 0px; outline: 0px; font-variant-numeric: inherit; font-variant-east-asian: inherit; font-stretch: inherit; line-height: 1.4em; vertical-align: baseline; color: #3d3c3c; box-sizing: border-box; background: #efeeee; overflow-x: auto;"><span>$kubectl get pods -n istio-system
NAME                                    READY   STATUS    RESTARTS   AGE
grafana-74dc798895-v76lj                1/1     Running   0          34m
istio-egressgateway-69bf865cf8-zm2zf    1/1     Running   0          34m
istio-ingressgateway-569d44555d-t5fhm   1/1     Running   0          34m
istio-tracing-8584b4d7f9-ln2vj          1/1     Running   0          34m
istiod-84cc4dfcd8-zzrvk                 1/1     Running   0          34m
kiali-6f457f5964-gp68c                  1/1     Running   0          34m
prometheus-79878ff5fd-442bq             2/2     Running   0          34m
</span></pre>
<p>Now you have a running environment with istion on kubernetes. Let's move on and start learning some of the features that istio offers.</p>